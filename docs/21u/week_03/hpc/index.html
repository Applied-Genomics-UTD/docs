<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-21u plugin-docs plugin-id-default docs-doc-id-week_03/hpc">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">High Performance Computing | Applied Genomics</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/Applied-Genomics/docs/21u/week_03/hpc"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="21u"><meta data-rh="true" name="docusaurus_tag" content="docs-default-21u"><meta data-rh="true" name="docsearch:version" content="21u"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-21u"><meta data-rh="true" property="og:title" content="High Performance Computing | Applied Genomics"><meta data-rh="true" name="description" content="How to use big computers"><meta data-rh="true" property="og:description" content="How to use big computers"><link data-rh="true" rel="icon" href="/Applied-Genomics/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/Applied-Genomics/docs/21u/week_03/hpc"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/Applied-Genomics/docs/21u/week_03/hpc" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/Applied-Genomics/docs/21u/week_03/hpc" hreflang="x-default"><link rel="stylesheet" href="/Applied-Genomics/assets/css/styles.2064253a.css">
<link rel="preload" href="/Applied-Genomics/assets/js/runtime~main.835ae336.js" as="script">
<link rel="preload" href="/Applied-Genomics/assets/js/main.ab17fb2c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Applied-Genomics/"><b class="navbar__title text--truncate">Applied Genomics</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Applied-Genomics/docs/21u/overview">Course</a><a class="navbar__item navbar__link" href="/Applied-Genomics/docs/resources">Resources</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/Applied-Genomics/docs/21u/resources">Summer 21</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Applied-Genomics/docs/resources">Summer 22</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Applied-Genomics/docs/21u/week_03/hpc">Summer 21</a></li><li><a class="dropdown__link" href="/Applied-Genomics/versions">All versions</a></li></ul></div><a href="http://taehoonkim.org/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Functional Genomics Laboratory<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Applied-Genomics/docs/21u/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Applied-Genomics/docs/21u/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Applied-Genomics/docs/21u/week-1">Week 1</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Applied-Genomics/docs/21u/week_02/intro">Week 2</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Applied-Genomics/docs/21u/week_03/code_alternatives">Week 3</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Applied-Genomics/docs/21u/week_03/code_alternatives">VS Code Alternatives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Applied-Genomics/docs/21u/week_03/conda">Conda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Applied-Genomics/docs/21u/week_03/hpc">HPC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Applied-Genomics/docs/21u/week_03/assignment_03">Assignment 3</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Applied-Genomics/docs/21u/week_04/transcriptomics">Week 4</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Applied-Genomics/docs/21u/week_05/jupyter_slurm">Week 5</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/Applied-Genomics/docs/21u/week_06/ucsc">Week 6</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Applied Genomics<!-- --> <b>Summer 21</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/Applied-Genomics/docs/resources">latest version</a></b> (<!-- -->Summer 22<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Applied-Genomics/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Week 3</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HPC</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Summer 21</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>High Performance Computing</h1></header><p>In the era of big data, we need big computers. Just like other expensive
resources these are shared among many researchers, however this also makes them
easy to get access to. At UT Dallas alone we have a few clusters you can
utilize:</p><ul><li>Sysbio, for training</li><li>Ganymede, for <strong>H</strong>igh <strong>P</strong>erformance <strong>C</strong>omputing</li><li>Europa(Public access coming soon), for <strong>H</strong>igh <strong>T</strong>hroughput <strong>C</strong>omputing</li></ul><p>Just for comparison, a node in the genomics queue on Ganymede has 16 cores, 32GB
of RAM, and is connected to a petabyte of storage. There&#x27;s also 16 nodes.
They&#x27;re free for you to use as well! You just need to know how to use them.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-a-cluster">What&#x27;s a cluster?<a class="hash-link" href="#whats-a-cluster" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://portal.tacc.utexas.edu/documents/10157/1181317/Login+and+compute+nodes/dd6fa98c-1695-4e62-8b7b-66f0c83ceba3?t=1436213020000" alt="TACC Graphic" class="img_ev3q"><sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></p><ul><li>You login to the login node<ul><li>Login nodes are a prep area</li><li>Transferring files</li><li>Compiling code</li><li>Submitting jobs</li></ul></li><li>The compute nodes are where actual computations occur and where research is
done. All batch jobs and executables, as well as development and debugging
sessions, are run on the compute nodes.<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></li></ul><p><img loading="lazy" src="https://docs.ycrc.yale.edu/img/clusters.png" alt="Yale Shared File System" class="img_ev3q"><sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></p><ul><li>The nodes all have access to a shared filesystem</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="slurm">Slurm<a class="hash-link" href="#slurm" title="Direct link to heading">​</a></h2><p>SLURM - Simple Linux Utility for Resource Management</p><p>Provides a way for users to schedule jobs. There are plenty of alternatives but
Slurm is pretty common. Checkout this <a href="https://bihealth.github.io/bih-cluster/slurm/cheat-sheet/" target="_blank" rel="noopener noreferrer">Slurm
Cheatsheet</a> if you
need to reference the commands to control it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tutorial">Tutorial<a class="hash-link" href="#tutorial" title="Direct link to heading">​</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Before we start with our first steps tutorial, we would like to introduce the following convention that we use throughout the series:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ Commands are prefixed with a little dollar sign</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ The </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> name is put infront of the dollar sign</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">compute $</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="instant-gratification">Instant Gratification<a class="hash-link" href="#instant-gratification" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ srun -p normal --time </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">-00 --mem</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">8G --ntasks</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> --pty </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> -i</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Once you&#x27;re logged into a node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">compute $ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scratch"><code>scratch</code><a class="hash-link" href="#scratch" title="Direct link to heading">​</a></h3><p>All users on the system have a file system quota. You&#x27;ll see it every time you
login. There&#x27;s a <strong>soft</strong> limit, that if you go over you&#x27;ll get the warning: <code> dm-0: warning, user block quota exceeded.</code>. There&#x27;s also a Hard limit, which if
you exceed it the process will be killed. You can check your quota with <code>quota -s</code></p><p><a href="http://docs.oithpc.utdallas.edu/#ganymede-space-constraints" target="_blank" rel="noopener noreferrer">See Ganymede Space Constraints for more info</a></p><p>But you should notice in your home directory you have a symbolic link called
<code>scratch</code>. This is connected to a large storage system and is unmetered.</p><p>Here&#x27;s a quick table comparing the two:</p><table><thead><tr><th>Attributes</th><th>Home Space</th><th>Scratch Space</th></tr></thead><tbody><tr><td>Purpose of the Space</td><td>To house scripts, source code and output data.</td><td>To have a large area for working with data or trying ideas</td></tr><tr><td>Backed Up</td><td>Yes</td><td>No</td></tr></tbody></table><p><sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-get-some-data">Let&#x27;s get some data<a class="hash-link" href="#lets-get-some-data" title="Direct link to heading">​</a></h3><p>So how do we get data from our browser, to the computer? How do we avoid
downloading it locally(to our laptops, which have limited space)?</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wget-the-non-interactive-network-downloader">wget-The non-interactive network downloader<a class="hash-link" href="#wget-the-non-interactive-network-downloader" title="Direct link to heading">​</a></h4><ul><li>wget allows us to download files from the web via the command line</li><li>It supports http, https and ftp</li></ul><p>Let&#x27;s use it!</p><ol><li>Let&#x27;s clone our project into the scratch directory</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> scratch</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/github-username/ag-intro.git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> ag-intro</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Download the data.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ </span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://github.com/nf-core/test-datasets/raw/modules/data/genomics/homo_sapiens/genome/genome.gtf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ </span><span class="token function" style="color:rgb(130, 170, 255)">wget</span><span class="token plain"> https://github.com/nf-core/test-datasets/raw/modules/data/genomics/homo_sapiens/illumina/bam/test.paired_end.sorted.bam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>While we&#x27;re at it, let&#x27;s through these commands into our <code>Makefile</code> so we don&#x27;t forget the commands!</p><div class="language-Makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Makefile codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">download_data: genome.gtf test.paired_end.sorted.bam</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">genome.gtf:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    wget https://github.com/nf-core/test-datasets/raw/modules/data/genomics/homo_sapiens/genome/genome.gtf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">test.paired_end.sorted.bam:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    wget https://github.com/nf-core/test-datasets/raw/modules/data/genomics/homo_sapiens/illumina/bam/test.paired_end.sorted.bam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Don&#x27;t forget to add the data to <code>.gitignore</code> before you commit!</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-we-just-download">What did we just download?<a class="hash-link" href="#what-did-we-just-download" title="Direct link to heading">​</a></h5><p>These files are two different formats that are common:</p><blockquote><p>The GFF/GTF/BED formats are the so-called “interval” formats that retain only the coordinate positions for a region in a genome. Each is tab delimited and will contain information on the chromosomal coordinate, start, end, strand, value and other attributes, though the order of the columns will depend on the feature.<sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup></p></blockquote><p>The GFF/GTF formats are 9 column tab-delimited formats. The coordinates start at value 1.</p><div class="language-tsv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsv codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">chr1 . mRNA            1300  9000  .  +  .  ID=mrna0001;Name=sonichedgehog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chr1 . exon            1300  1500  .  +  .  ID=exon00001;Parent=mrna0001</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chr1 . exon            1050  1500  .  +  .  ID=exon00002;Parent=mrna0001</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>The SAM/BAM formats are so-called Sequence Alignment Maps. These files typically represent the results of aligning a FASTQ file to a reference FASTA file and describe the individual, pairwise alignments that were found. Different algorithms may create different alignments (and hence BAM files).<sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup></p></blockquote><div class="language-tsv codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsv codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">SRR1553425.13617    163 AF086833.2  46  60  101M    =   541 596 GAATAACTATGAGGAAGATTAATAATTTTCCTCTCATTGAAATTTATATCGGAATTTAAATTGAAATTGTTACTGTAATCATACCTGGTTTGTTTCAGAGC   @&lt;@FFFDDHHGHHJIJJIJJJJJJJJJJJJJJIIJJJJGIJJJJJJEIEIGIIJJJJJIIIIGIIIGGEGIIIGIIJJJGGGHHFHGFDDFDEEDDEDCDCNM:i:1 MD:Z:81C19  MC:Z:101M   AS:i:96 XS:i:0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SRR1553425.13755    99  AF086833.2  46  60  101M    =   46  101 GAATAACTATGAGGAAGATTAATAATTTTCCTCTCATTGAAATTTATATCGGAATTTAAATTGAAATTGTTACTGTAATCATACCTGGTTTGTTTCAGAGC   ?:@DBDDDFHGDHGIGEGAFGGHDHIIIIIIIGGGGIGEBHHGHFGHIDCHIIIIII&lt;G@FGHDFGGHH@FGGEGGGEHIE@HHHGHF;?BC@CECFC:@&gt;NM:i:1 MD:Z:81C19  MC:Z:101M   AS:i:96 XS:i:0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SRR1553425.13755    147 AF086833.2  46  60  101M    =   46  -101    GAATAACTATGAGGAAGATTAATAATTTTCCTCTCATTGAAATTTATATCGGAATTTAAATTGAAATTGTTACTGTAATCATACCTGGTTTGTTTCAGAGC   DDDDCDDDDDECEEDEDFFFEFFGHHHHIGGHG@=@@=GIIJHIIHFDIIIIIIHHGJIFAJJJIGIJIIIJHHGGIGEGGHFHHJIIHHHGHFFFFFCCCNM:i:1 MD:Z:81C19  MC:Z:101M   AS:i:96 XS:i:0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">SRR1553425.11219    2227    AF086833.2  47  60  71H30M  =   146 171 AATAACTATGAGGAAGATTAATAATTTTCC  IGHF@GHEHIIHE&gt;IIGHFDHDDDFFF@@@  NM:i:0  MD:Z:30 MC:Z:101M   AS:i:30 XS:i:0  SA:Z:AF086833.2,68,+,30S71M,60,1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find more info at <a href="https://www.biostarhandbook.com/common-data-types.html" target="_blank" rel="noopener noreferrer">Biostars handbook Common data types</a></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="some-other-ways-to-get-data-onto-the-cluster">Some other ways to get data onto the cluster<a class="hash-link" href="#some-other-ways-to-get-data-onto-the-cluster" title="Direct link to heading">​</a></h5><p><code>wget</code> isn&#x27;t the only way to get things to the cluster. It&#x27;s great for stuff that&#x27;s on the internet, but what about local files?<sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup></p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="scp---secure-copy">SCP - secure copy<a class="hash-link" href="#scp---secure-copy" title="Direct link to heading">​</a></h6><ul><li>Local file to remote server</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">scp</span><span class="token plain"> filename.txt hostname:/path/to/filename/filename.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Remote server to local file</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">scp</span><span class="token plain"> hostname:filename.txt </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Recursive copies on directories also work with <code>-r</code></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">scp</span><span class="token plain"> –r hbar.ices.utexas.edu:public_html ~/tmp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="rsync---a-fast-versatile-remote-and-local-file-copying-tool">rsync - a fast, versatile, remote (and local) file-copying tool<a class="hash-link" href="#rsync---a-fast-versatile-remote-and-local-file-copying-tool" title="Direct link to heading">​</a></h5><ul><li>Example 1. Synchronize Two Directories in a Local Server</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -zvr /path/to/source /path/to/copy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>z</code> - enable compression</p></li><li><p><code>v</code> - verbose</p></li><li><p><code>r</code> -recursive</p></li><li><p>Example 2. Preserve timestamps during Sync using rsync <code>–a</code></p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">rsync</span><span class="token plain"> -azv /path/to/source /path/to/copy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>-a</code> enters archive mode</li><li>Archive mode does the following:</li><li>Recursive mode</li><li>Preserves symbolic links</li><li>Preserves permissions</li><li>Preserves timestamp</li><li>Preserves owner and group</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="back-to-the-tutorial">Back to the Tutorial<a class="hash-link" href="#back-to-the-tutorial" title="Direct link to heading">​</a></h3><p>So we&#x27;ve got the data. But how do we get the software we need to do anything with it?</p><p>We&#x27;ll first use <a href="https://lmod.readthedocs.io/en/latest/" target="_blank" rel="noopener noreferrer">Lmod: A New Environment Module System</a></p><p>Some helpful commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ module list </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># What modules do I currently have enabled?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ module load subread </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Load the subread module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ module unload subread  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Unload the subread module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ module unload anaconda3  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Load the anaconda3 module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ module save default </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Save the current module stack to the default stack</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>So let&#x27;s actually run <code>featurecounts</code> and get the counts for our genes!</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ srun -p normal --time </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">-00 --mem</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">8G --ntasks</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"> --pty </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> -i</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">compute $ ml load subread</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">compute $ featureCounts -t exon -g gene_id -a genome.gtf -o counts.txt test.paired_end.sorted.bam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pop open <code>counts.txt</code> with <code>cat counts.txt</code> and check out the data!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sbatch"><code>sbatch</code><a class="hash-link" href="#sbatch" title="Direct link to heading">​</a></h3><p>So the interactive login for jobs is great, when no one else is using the cluster! Why should we have to wait around in line all day to get our time on a compute node? What if we could tell the cluster what we wanted to do and it would schedule the jobs for us?</p><blockquote><p>You use the sbatch command in front of the script you actually want to run. sbatch then puts your job into the job queue. The job scheduler looks at the current status of the whole system and will assign the first job in the queue to a node that is free in terms of computational load. If all machines are busy, yours will wait. But your job will sooner or later get assigned to a free node. <sup id="fnref-6"><a href="#fn-6" class="footnote-ref">6</a></sup></p></blockquote><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-script">Example script<a class="hash-link" href="#example-script" title="Direct link to heading">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set a name for the job (-J or --job-name).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --job-name=tutorial</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set the file to write the stdout and stderr to (if -e is not set; -o or --output).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --output=logs/%x-%j.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set the number of cores (-n or --ntasks).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --ntasks=8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Force allocation of the two cores on ONE node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set the total memory. Units can be given in T|G|M|K.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --mem=8G</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optionally, set the partition to be used (-p or --partition).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --partition=medium</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set the expected running time of your job (-t or --time).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Formats are MM:SS, HH:MM:SS, Days-HH, Days-HH:MM, Days-HH:MM:SS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --time=30:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">TMPDIR</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/fast/users/</span><span class="token variable" style="color:rgb(191, 199, 213)">${</span><span class="token variable environment constant" style="color:rgb(130, 170, 255)">USER</span><span class="token variable" style="color:rgb(191, 199, 213)">}</span><span class="token plain">/scratch/tmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> -p </span><span class="token variable" style="color:rgb(191, 199, 213)">${TMPDIR}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The lines starting with #SBATCH are actually setting parameters for a sbatch command, so #SBATCH --job-name=tutorial is equal to sbatch --job-name=tutorial.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="turning-our-featurecount-command-into-a-script">Turning our featurecount command into a script<a class="hash-link" href="#turning-our-featurecount-command-into-a-script" title="Direct link to heading">​</a></h4><p>Open up a new file in your text editor</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_Ktv7">submit_job.sh</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --job-name=featurecounts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --ntasks=8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --nodes=1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --mem=8G</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --partition=normal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#SBATCH --time=30:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ml load subread</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">featureCounts -t exon -g gene_id -a genome.gtf -o counts.txt test.paired_end.sorted.bam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And then submit it to the cluster with</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ sbatch submit_job.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">login $ </span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> *.out</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="commit-your-changes">Commit your Changes!<a class="hash-link" href="#commit-your-changes" title="Direct link to heading">​</a></h3><p>Make sure to gitignore your input data and any results you produced! Along with
any log files from sbatch.
It&#x27;s up to you whether you want to create a make rule for <code>sbatch</code> or just include it in the <code>README</code></p><h1>Further Reading</h1><ul><li><a href="https://bihealth.github.io/bih-cluster/slurm/cheat-sheet/" target="_blank" rel="noopener noreferrer">Slurm Cheatsheet</a></li><li><a href="http://docs.oithpc.utdallas.edu/" target="_blank" rel="noopener noreferrer">UTDallas HPC Cluster Users Guide</a></li><li><a href="https://docs.ycrc.yale.edu/clusters-at-yale/" target="_blank" rel="noopener noreferrer">Yale HPC Docs</a></li></ul><div class="footnotes"><hr><ol><li id="fn-1"><a href="https://portal.tacc.utexas.edu/user-guides/lonestar5" target="_blank" rel="noopener noreferrer">TACC Lonestar5 User guide</a><a href="#fnref-1" class="footnote-backref">↩</a></li><li id="fn-2"><a href="https://docs.ycrc.yale.edu/clusters-at-yale/" target="_blank" rel="noopener noreferrer">Yale HPC Docs</a><a href="#fnref-2" class="footnote-backref">↩</a></li><li id="fn-3"><a href="http://docs.oithpc.utdallas.edu/" target="_blank" rel="noopener noreferrer">UTDallas HPC Cluster Users Guide</a><a href="#fnref-3" class="footnote-backref">↩</a></li><li id="fn-4"><a href="https://www.biostarhandbook.com/common-data-types.html" target="_blank" rel="noopener noreferrer">Biostars handbook Common data types</a><a href="#fnref-4" class="footnote-backref">↩</a></li><li id="fn-5">[HPC Class SSH and Slurm lecture]<a href="#fnref-5" class="footnote-backref">↩</a></li><li id="fn-6"><a href="https://bihealth.github.io/bih-cluster/first-steps/" target="_blank" rel="noopener noreferrer">BIH HPC Docs</a><a href="#fnref-6" class="footnote-backref">↩</a></li></ol></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Functional-Genomics-Lab/Applied-Genomics/edit/main/versioned_docs/version-21u/week_03/hpc.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/Applied-Genomics/docs/21u/week_03/conda"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Conda</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Applied-Genomics/docs/21u/week_03/assignment_03"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Assignment 3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#whats-a-cluster" class="table-of-contents__link toc-highlight">What&#39;s a cluster?</a></li><li><a href="#slurm" class="table-of-contents__link toc-highlight">Slurm</a></li><li><a href="#tutorial" class="table-of-contents__link toc-highlight">Tutorial</a><ul><li><a href="#instant-gratification" class="table-of-contents__link toc-highlight">Instant Gratification</a></li><li><a href="#scratch" class="table-of-contents__link toc-highlight"><code>scratch</code></a></li><li><a href="#lets-get-some-data" class="table-of-contents__link toc-highlight">Let&#39;s get some data</a></li><li><a href="#back-to-the-tutorial" class="table-of-contents__link toc-highlight">Back to the Tutorial</a></li><li><a href="#sbatch" class="table-of-contents__link toc-highlight"><code>sbatch</code></a></li><li><a href="#commit-your-changes" class="table-of-contents__link toc-highlight">Commit your Changes!</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Course</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Applied-Genomics/docs/overview">Overview</a></li></ul></div></div></div></footer></div>
<script src="/Applied-Genomics/assets/js/runtime~main.835ae336.js"></script>
<script src="/Applied-Genomics/assets/js/main.ab17fb2c.js"></script>
</body>
</html>